pipeline {
    agent any

        tools {
            maven "maven_j"
        }

    stages {
        stage('Deploy') {
            steps {
                script {
                    // Extracting the values of variables from the trigger
                    def action = env.action
                    def merged = env.merged

                    if (action != 'closed' && merged != 'true') {
                        echo "Conditions not met. Skipping the job."
                        echo "action:" action
                        echo "merged:" merged
                        currentBuild.result = 'ABORTED'
                        error "Build aborted due to conditions not met."
                    }
                }
                echo 'Deploying....'
               sh 'mvn clean deploy -P master'
            }
        }
    }
}