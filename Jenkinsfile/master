pipeline {
    agent any

        tools {
            maven "maven_j"
        }

    stages {
        stage('Deploy') {
            steps {
                script {
                    // Extracting the values of variables from the trigger
                    def actionState = env.actionState
                    def isMerged = env.isMerged

                    if (actionState != 'closed' && isMerged != 'true') {
                        echo "Conditions not met. Skipping the job."
                        echo "actionState:" actionState
                        echo "isMerged:" isMerged
                        currentBuild.result = 'ABORTED'
                        error "Build aborted due to conditions not met."
                    }
                }
                echo 'Deploying....'
               sh 'mvn clean deploy -P master'
            }
        }
    }
}